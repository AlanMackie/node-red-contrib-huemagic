<script type="text/x-red" data-help-name="hue-motion">
    <p>Hue Bewegungssensor zur Steuerung des Bewegungssensors und zum Empfang von Bewegungsereignissen.</p>

    <h3>Einrichtung</h3>
    <p>Wählen Sie die vorkonfigurierte Hue Bridge und klicken Sie auf die Suchschaltfläche, um alle verfügbaren Bewegungssensoren zu finden. Geben Sie den Namen des Sensors manuell ein oder behalten Sie den Standardgerätenamen bei. Beachten Sie, dass Ereignisse nur gesendet werden, wenn eine Bewegung erkannt wird, wenn eine Bewegung stoppt oder wenn der Bewegungssensor den Befehl "Aktivieren / Deaktivieren" empfängt. Bei Bedarf können alle Statusaktualisierungen dieses Nodes durch Aktivieren der Option "Mitteilungen ignorieren" ignoriert werden. Wenn Sie diesen Node im Universalmodus betreiben, können Sie optional auch auswählen, ob dieser Node alle Mitteilungen von anderen Nodes desselben Typs empfangen und ausgeben soll.</p>

    <h3>Aktivieren / Deaktivieren</h3>
    <p>Aktiviert oder deaktiviert den Bewegungssensor oder ruft den Status ab basierend auf den übergebenen <b>msg</b>-Werten von:</p>
    <dl class="message-properties">
        <dt>true<span class="property-type">boolean</span></dt>
        <dd>Aktiviert den Bewegungssensor</dd>

        <dt>false<span class="property-type">boolean</span></dt>
        <dd>Deaktiviert den Bewegungssensor</dd>

        <dt class="optional">status<span class="property-type">any</span></dt>
        <dd>Gibt den aktuellen Status des Nodes zurück, ohne eine Aktion durchzuführen</dd>
    </dl>

    <h3>Bewegungsereignisse</h3>
    <p>Die vom Bewegungssensor gesendete Ereignismeldung enthält die folgenden Daten im Objekt <b>msg.payload</b>:</p>
    <dl class="message-properties">
        <dt>active<span class="property-type">boolean</span></dt>
        <dd>Aktueller Sensorzustand</dd>

        <dt>motion<span class="property-type">boolean</span></dt>
        <dd>Zeigt an, ob eine Bewegung erkannt wurde oder nicht</dd>

        <dt>updated<span class="property-type">string</span></dt>
        <dd>ISO 8601 Datum der zuletzt erkannten Bewegung</dd>
    </dl>

    <h3>Zusätzliche Sensorinformationen</h3>
    <p>Zusätzliche Informationen zum Sensor werden an das Objekt <b>msg.info</b> gesendet:</p>
    <dl class="message-properties">
        <dt>id<span class="property-type">int</span></dt>
        <dd>Numerische ID des Sensors, wie auf der Bridge registriert</dd>

        <dt>uniqueId<span class="property-type">string</span></dt>
        <dd>Eindeutige ID des Sensors (normalerweise Hardware-ID)</dd>

        <dt>name<span class="property-type">string</span></dt>
        <dd>Name des Sensors</dd>

        <dt>type<span class="property-type">string</span></dt>
        <dd>Sensor-Typ (z.B. Daylight, CLIPTemperature, ZGPSwitch)</dd>

        <dt>softwareVersion<span class="property-type">float</span></dt>
        <dd>Softwareversion des Sensors</dd>

        <dt>battery<span class="property-type">int</span></dt>
        <dd>Aktueller Batteriestand des Sensors in Prozent</dd>

        <dt>model<span class="property-type">object</span></dt>
        <dd>Das Modellobjekt des Sensors enthält modellspezifische Informationen wie model.id, model.manufacturer, model.name und model.type</dd>
    </dl>

    <h3>Universalmodus (optional)</h3>
    <p>Definiert die Sensor-ID auf der Hue Bridge manuell, wenn sie nicht in den Node-Eigenschaften konfiguriert ist:</p>
    <dl class="message-properties">
        <dt>msg.topic<span class="property-type">int</span></dt>
        <dd>Manuelle Definition der Sensor-ID</dd>
    </dl>

    <h3>Letzte Zustandsinformationen</h3>
    <p>Dieser Node schickt auch die gesamten letzten Zustandsinformationen (vor dem Update) in das <b>msg.lastState</b>-Objekt. Dieses kann entweder false (Boolean) or die Objekte payload (msg.lastState.payload) und info (msg.lastState.info) beinhalten. Der Rückgabewert "false" wird nur dann gesendet, wenn es keinen letzten Zustand gab oder der Node neu erstellt oder gestartet wurde.</p>
</script>